<!DOCTYPE html>
<html lang="lo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Luxe Money 2026 - Universal Filter</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Lao:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1; --income: #10b981; --expense: #f43f5e;
            --bg: #0b0f1a; --card: rgba(23, 27, 44, 0.95);
            --glass: rgba(255, 255, 255, 0.05); --text: #ffffff; --sub: #94a3b8;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body {
            font-family: 'Noto Sans Lao', sans-serif; background-color: var(--bg);
            background-image: radial-gradient(circle at 0% 0%, #1e1b4b 0%, transparent 45%),
                              radial-gradient(circle at 100% 100%, #312e81 0%, transparent 45%);
            color: var(--text); margin: 0; padding: 0; height: 100dvh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* PIN LOCK */
        #pin-screen { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .pin-dots { display: flex; gap: 20px; margin-bottom: 40px; }
        .pin-dot { width: 14px; height: 14px; border: 2px solid var(--primary); border-radius: 50%; }
        .pin-dot.active { background: var(--primary); box-shadow: 0 0 15px var(--primary); transform: scale(1.2); }
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; width: 80%; max-width: 320px; }
        .num-btn { aspect-ratio: 1/1; border-radius: 50%; background: var(--glass); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 600; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); color: white; }

        .app-container { flex: 1; overflow-y: auto; padding: 20px 20px 120px; width: 100%; max-width: 500px; margin: auto; }
        
        .header-card { background: var(--card); border: 1px solid rgba(255,255,255,0.1); border-radius: 30px; padding: 25px; margin-bottom: 20px; text-align: center; backdrop-filter: blur(15px); }
        .bal-val { font-size: 2.3rem; font-weight: 700; margin: 5px 0 15px; letter-spacing: -1px; }

        .glass-card { background: var(--card); border-radius: 24px; padding: 20px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .card-header { font-weight: 700; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }

        .type-pill { display: flex; background: #000; padding: 4px; border-radius: 14px; margin-bottom: 15px; }
        .t-btn { flex: 1; padding: 10px; border: none; border-radius: 10px; background: transparent; color: var(--sub); font-weight: 700; font-family: inherit; cursor: pointer; }
        .t-btn.active-exp { background: var(--expense); color: white; }
        .t-btn.active-inc { background: var(--income); color: white; }

        input, select { width: 100%; background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1); padding: 12px; border-radius: 12px; color: white; margin-bottom: 8px; font-size: 14px; font-family: inherit; }
        .btn-action { width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 18px; font-weight: 700; font-size: 1rem; cursor: pointer; }

        .tx-card { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: var(--glass); border-radius: 20px; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.03); }
        .tx-actions { display: flex; gap: 15px; color: var(--sub); font-size: 0.8rem; margin-top: 5px; }

        .nav-bar { position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%); width: calc(100% - 30px); max-width: 460px; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(25px); border-radius: 22px; display: flex; justify-content: space-around; padding: 10px 0; border: 1px solid rgba(255,255,255,0.1); z-index: 1000; }
        .nav-link { border: none; background: none; color: var(--sub); display: flex; flex-direction: column; align-items: center; gap: 4px; font-size: 0.65rem; cursor: pointer; }
        .nav-link.active { color: var(--primary); }

        .view { display: none; }
        .view.active { display: block; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #share-img { width: 100%; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 15px; }
        #canvas-hidden { display: none; }
        .bar-wrap { width: 100%; background: rgba(255,255,255,0.05); height: 8px; border-radius: 4px; margin-top: 6px; overflow: hidden; }
        .bar-fill { background: var(--primary); height: 100%; width: 0%; transition: 1s ease; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="pin-screen">
    <i class="fa-solid fa-shield-halved" style="font-size: 3rem; color: var(--primary); margin-bottom: 20px;"></i>
    <div class="pin-dots"><div class="pin-dot" id="dot-0"></div><div class="pin-dot" id="dot-1"></div><div class="pin-dot" id="dot-2"></div><div class="pin-dot" id="dot-3"></div></div>
    <div class="numpad">
        <div class="num-btn" onclick="tap(1)">1</div><div class="num-btn" onclick="tap(2)">2</div><div class="num-btn" onclick="tap(3)">3</div>
        <div class="num-btn" onclick="tap(4)">4</div><div class="num-btn" onclick="tap(5)">5</div><div class="num-btn" onclick="tap(6)">6</div>
        <div class="num-btn" onclick="tap(7)">7</div><div class="num-btn" onclick="tap(8)">8</div><div class="num-btn" onclick="tap(9)">9</div>
        <div class="num-btn" onclick="tap('C')"><i class="fa-solid fa-backspace"></i></div>
        <div class="num-btn" onclick="tap(0)">0</div>
        <div class="num-btn" onclick="location.reload()"><i class="fa-solid fa-sync"></i></div>
    </div>
</div>

<div class="app-container">
    <div class="glass-card" style="position: sticky; top: 0; z-index: 100; padding: 15px; margin-bottom: 20px;">
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <input type="date" id="g-start" onchange="updateAllViews()">
            <input type="date" id="g-end" onchange="updateAllViews()">
        </div>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:5px;">
            <select id="g-cat" onchange="updateAllViews()"></select>
            <select id="g-wallet" onchange="updateAllViews()">
                <option value="all">‡∫ó‡∫∏‡∫Å‡∫Å‡∫∞‡ªÄ‡∫õ‡∫ª‡∫≤</option>
                <option value="Bank">Bank (‡ªÇ‡∫≠‡∫ô)</option>
                <option value="Cash">Cash (‡∫™‡∫ª‡∫î)</option>
            </select>
        </div>
    </div>

    <div class="header-card">
        <small style="font-size:0.65rem; color:var(--sub); letter-spacing:1px;">‡∫ç‡∫≠‡∫î‡ªÄ‡∫´‡∫º‡∫∑‡∫≠‡∫ï‡∫≤‡∫° Filter</small>
        <div class="bal-val" id="f-balance">0 ‚Ç≠</div>
        <div style="display:flex; justify-content:space-around; font-size:0.75rem;">
            <span style="color:var(--income)">‡∫Æ‡∫±‡∫ö: <b id="f-recv">0</b></span>
            <span style="color:var(--expense)">‡∫à‡ªà‡∫≤‡∫ç: <b id="f-spent">0</b></span>
        </div>
    </div>

    <div id="v-add" class="view active">
        <div class="glass-card">
            <div class="card-header" id="form-title"><i class="fa-solid fa-circle-plus"></i> ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡ªÉ‡ªù‡ªà</div>
            <div class="type-pill">
                <button id="m-exp" class="t-btn active-exp" onclick="setMode('expense')">‡∫à‡ªà‡∫≤‡∫ç</button>
                <button id="m-inc" class="t-btn" onclick="setM('income')">‡∫Æ‡∫±‡∫ö</button>
            </div>
            <div style="display:grid; grid-template-columns: 1fr 1.2fr; gap:10px;">
                <input type="date" id="i-date">
                <select id="i-wallet"><option value="Bank" selected>Bank (‡ªÇ‡∫≠‡∫ô)</option><option value="Cash">Cash (‡∫™‡∫ª‡∫î)</option></select>
            </div>
            <select id="i-cat"></select>
            <input type="text" id="i-amt" inputmode="decimal" placeholder="0 ‚Ç≠" oninput="fNum(this)" style="text-align:center; font-size:1.5rem; color:var(--primary); font-weight:700;">
            <input type="text" id="i-note" placeholder="‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î...">
            <button class="btn-action" id="btn-save" onclick="save()">‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô</button>
            <button class="btn-action hidden" id="btn-cancel" style="background:#444; margin-top:10px;" onclick="cancelEdit()">‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å</button>
        </div>
        <div id="history-list"></div>
    </div>

    <div id="v-report" class="view">
        <div class="glass-card">
            <div class="card-header"><i class="fa-solid fa-chart-pie"></i> ‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫ï‡∫≤‡∫°‡ªù‡∫ß‡∫î‡ªù‡∫π‡ªà (Filtered)</div>
            <div id="cat-bars-render"></div>
        </div>
    </div>

    <div id="v-share" class="view">
        <div class="glass-card" style="text-align:center;">
            <div class="card-header"><i class="fa-solid fa-share-nodes"></i> Share Filtered Report</div>
            <canvas id="canvas-hidden" width="600" height="920"></canvas>
            <img id="share-img" alt="Finance Summary">
            <button class="btn-action" onclick="downloadImg()" style="background:var(--income);"><i class="fa-solid fa-download"></i> Download Image</button>
        </div>
    </div>

    <div id="v-settings" class="view">
        <div class="glass-card">
            <div class="card-header">Manage Categories</div>
            <div style="display:flex; gap:8px;">
                <input type="text" id="n-cat" placeholder="Add..." style="margin:0;">
                <button onclick="addC()" style="width:60px; border-radius:12px; border:none; background:var(--primary); color:white;">+</button>
            </div>
            <div id="cat-list-edit" style="margin-top:15px;"></div>
        </div>
        <button class="btn-action" style="background:#334155;" onclick="exportData()">üíæ Backup Data</button>
        <button class="btn-action" style="background:var(--expense); margin-top:10px;" onclick="resetPIN()">üîê Reset PIN</button>
    </div>

    <nav class="nav-bar">
        <button class="nav-link active" onclick="nav('add', this)"><i class="fa-solid fa-house"></i><span>Home</span></button>
        <button class="nav-link" onclick="nav('report', this)"><i class="fa-solid fa-chart-simple"></i><span>Report</span></button>
        <button class="nav-link" onclick="nav('share', this)"><i class="fa-solid fa-image"></i><span>Share</span></button>
        <button class="nav-link" onclick="nav('settings', this)"><i class="fa-solid fa-gear"></i><span>Settings</span></button>
    </nav>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('luxe_money_v7_universal')) || {
        records: [], cats: ['‡∫≠‡∫≤‡∫´‡∫≤‡∫ô', '‡∫ô‡ªâ‡∫≥‡∫°‡∫±‡∫ô', '‡ªÄ‡∫á‡∫¥‡∫ô‡ªÄ‡∫î‡∫∑‡∫≠‡∫ô', '‡∫Ñ‡ªà‡∫≤‡∫´‡ªâ‡∫≠‡∫á', '‡∫ó‡∫ª‡ªà‡∫ß‡ªÑ‡∫õ'], pin: null, m: 'expense'
    };

    let pIn = "";
    let editId = null;
    document.getElementById('i-date').valueAsDate = new Date();
    document.getElementById('g-start').valueAsDate = new Date(new Date().getFullYear(), new Date().getMonth(), 1);
    document.getElementById('g-end').valueAsDate = new Date();

    function tap(n) {
        if(n==='C') pIn = ""; else if(pIn.length < 4) pIn += n;
        const dots = document.querySelectorAll('.pin-dot');
        dots.forEach((d, i) => d.classList.toggle('active', i < pIn.length));
        if(pIn.length === 4) {
            setTimeout(() => {
                if(!db.pin) { db.pin = pIn; saveDB(); document.getElementById('pin-screen').style.display='none'; }
                else if(pIn === db.pin) document.getElementById('pin-screen').style.display='none';
                else { alert("PIN ‡∫ú‡∫¥‡∫î!"); pIn=""; tap('C'); }
            }, 200);
        }
    }

    function nav(v, el) {
        document.querySelectorAll('.view').forEach(x => x.classList.remove('active'));
        document.getElementById('v-'+v).classList.add('active');
        document.querySelectorAll('.nav-link').forEach(x => x.classList.remove('active'));
        el.classList.add('active');
        updateAllViews();
    }

    function fNum(el) {
        let v = el.value.replace(/,/g, '');
        if(!isNaN(v) && v!=="") el.value = Number(v).toLocaleString();
    }

    function setMode(m) {
        db.m = m;
        document.getElementById('m-exp').className = m==='expense' ? 't-btn active-exp' : 't-btn';
        document.getElementById('m-inc').className = m==='income' ? 't-btn active-inc' : 't-btn';
    }

    function saveDB() { localStorage.setItem('luxe_money_v7_universal', JSON.stringify(db)); updateAllViews(); }

    function save() {
        const val = document.getElementById('i-amt').value.replace(/,/g, '');
        const amt = parseFloat(val);
        if(!amt) return alert("‡∫õ‡ªâ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫Å‡ªà‡∫≠‡∫ô!");
        const record = { id: editId || Date.now(), type: db.m, amt, note: document.getElementById('i-note').value, cat: document.getElementById('i-cat').value, date: document.getElementById('i-date').value, wallet: document.getElementById('i-wallet').value };
        if(editId) { db.records = db.records.map(r => r.id === editId ? record : r); editId = null; }
        else { db.records.unshift(record); }
        document.getElementById('i-amt').value = ""; document.getElementById('i-note').value = "";
        document.getElementById('btn-save').innerText = "‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô";
        document.getElementById('btn-cancel').classList.add('hidden');
        saveDB();
    }

    function editR(id) {
        const r = db.records.find(x => x.id === id);
        if(!r) return;
        editId = id;
        setMode(r.type);
        document.getElementById('i-date').value = r.date;
        document.getElementById('i-wallet').value = r.wallet;
        document.getElementById('i-cat').value = r.cat;
        document.getElementById('i-amt').value = r.amt.toLocaleString();
        document.getElementById('i-note').value = r.note;
        document.getElementById('btn-save').innerText = "‡∫≠‡∫±‡∫ö‡ªÄ‡∫î‡∫î‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô";
        document.getElementById('btn-cancel').classList.remove('hidden');
        document.getElementById('form-title').innerHTML = '<i class="fa-solid fa-pen-to-square"></i> ‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô';
        nav('add', document.querySelectorAll('.nav-link')[0]);
    }

    function cancelEdit() { editId = null; document.getElementById('i-amt').value = ""; document.getElementById('btn-save').innerText = "‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô"; document.getElementById('btn-cancel').classList.add('hidden'); }

    function delR(id) { if(confirm("‚ö†Ô∏è ‡∫•‡∫∂‡∫ö‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫ô‡∫µ‡ªâ?")) { db.records = db.records.filter(r => r.id !== id); saveDB(); } }

    function getFilteredData() {
        const start = document.getElementById('g-start').value;
        const end = document.getElementById('g-end').value;
        const cat = document.getElementById('g-cat').value;
        const wal = document.getElementById('g-wallet').value;
        
        return db.records.filter(r => {
            const mD = (!start || r.date >= start) && (!end || r.date <= end);
            const mC = (cat === 'all' || r.cat === cat);
            const mW = (wal === 'all' || r.wallet === wal);
            return mD && mC && mW;
        });
    }

    function updateAllViews() {
        const filtered = getFilteredData();
        let s = 0, r_val = 0;
        filtered.forEach(r => { if(r.type==='income') r_val += r.amt; else s += r.amt; });

        document.getElementById('f-balance').innerText = (r_val - s).toLocaleString() + " ‚Ç≠";
        document.getElementById('f-spent').innerText = s.toLocaleString();
        document.getElementById('f-recv').innerText = r_val.toLocaleString();

        document.getElementById('i-cat').innerHTML = db.cats.map(x => `<option value="${x}">${x}</option>`).join('');
        document.getElementById('g-cat').innerHTML = '<option value="all">‡∫ó‡∫∏‡∫Å‡ªù‡∫ß‡∫î‡ªù‡∫π‡ªà</option>' + db.cats.map(x => `<option value="${x}">${x}</option>`).join('');

        // Update List
        document.getElementById('history-list').innerHTML = filtered.map(r => `
            <div class="tx-card">
                <div style="display:flex; align-items:center; gap:12px;">
                    <div style="width:40px; height:40px; border-radius:12px; background:rgba(${r.type==='income'?'16,185,129':'244,63,94'},0.1); color:var(--${r.type}); display:flex; align-items:center; justify-content:center;"><i class="fa-solid ${r.type==='income'?'fa-arrow-down':'fa-arrow-up'}"></i></div>
                    <div><b>${r.note || r.cat}</b><br><small style="color:var(--sub)">${r.date} ‚Ä¢ ${r.wallet}</small></div>
                </div>
                <div style="text-align:right">
                    <b style="color:var(--${r.type})">${r.type==='income'?'+':'-'}${r.amt.toLocaleString()}</b>
                    <div class="tx-actions"><i class="fa-solid fa-pen" onclick="editR(${r.id})"></i> <i class="fa-solid fa-trash" onclick="delR(${r.id})"></i></div>
                </div>
            </div>`).join('') || '<p style="text-align:center; color:var(--sub);">‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô</p>';

        renderReport(filtered);
        genImage(filtered);
        renderSettings();
    }

    function renderReport(data) {
        const cm = {};
        data.filter(r => r.type === 'expense').forEach(r => cm[r.cat] = (cm[r.cat] || 0) + r.amt);
        const sorted = Object.entries(cm).sort((a,b)=>b[1]-a[1]);
        const max = Math.max(...Object.values(cm), 1);
        document.getElementById('cat-bars-render').innerHTML = sorted.map(([k,v]) => `<div style="margin-bottom:12px;"><div style="display:flex; justify-content:space-between; font-size:0.8rem; margin-bottom:5px;"><span>${k}</span><b>${v.toLocaleString()} ‚Ç≠</b></div><div class="bar-wrap"><div class="bar-fill" style="width:${(v/max)*100}%"></div></div></div>`).join('') || '<p style="text-align:center; color:var(--sub);">‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô</p>';
    }

    function renderSettings() {
        document.getElementById('cat-list-edit').innerHTML = db.cats.map(c => `<div style="display:flex; justify-content:space-between; padding:10px; background:var(--glass); border-radius:12px; margin-bottom:5px;"><span>${c}</span><span style="color:var(--expense);" onclick="delC('${c}')"><i class="fa-solid fa-xmark"></i></span></div>`).join('');
    }

    function genImage(data) {
        const canvas = document.getElementById('canvas-hidden');
        const ctx = canvas.getContext('2d');
        const start = document.getElementById('g-start').value;
        const end = document.getElementById('g-end').value;
        let inc = 0, exp = 0; const cm = {};
        data.forEach(r => { if(r.type==='income') inc += r.amt; else { exp += r.amt; cm[r.cat] = (cm[r.cat] || 0) + r.amt; } });

        ctx.fillStyle = "#0b0f1a"; ctx.fillRect(0, 0, 600, 920);
        ctx.fillStyle = "#6366f1"; ctx.fillRect(0, 0, 600, 220);
        ctx.fillStyle = "#fff"; ctx.font = "bold 40px Arial"; ctx.fillText("Luxe Finance Card", 50, 80);
        ctx.font = "20px Arial"; ctx.fillText(`Range: ${start || 'Start'} to ${end || 'End'}`, 50, 130);
        ctx.fillText(`Category: ${document.getElementById('g-cat').value}`, 50, 165);

        ctx.fillStyle = "#171b2c";
        if(ctx.roundRect) ctx.roundRect(40, 250, 520, 260, 30); else ctx.fillRect(40, 250, 520, 260);
        ctx.fill();

        ctx.fillStyle = "#fff"; ctx.font = "24px Arial";
        ctx.fillText("Income:", 70, 310); ctx.fillStyle = "#10b981"; ctx.fillText("+ " + inc.toLocaleString(), 340, 310);
        ctx.fillStyle = "#fff"; ctx.fillText("Expense:", 70, 370); ctx.fillStyle = "#f43f5e"; ctx.fillText("- " + exp.toLocaleString(), 340, 370);
        ctx.fillStyle = "rgba(255,255,255,0.1)"; ctx.fillRect(70, 410, 460, 2);
        ctx.fillStyle = "#fff"; ctx.font = "bold 32px Arial"; ctx.fillText("Net Balance:", 70, 465);
        ctx.fillStyle = "#6366f1"; ctx.fillText((inc - exp).toLocaleString() + " KIP", 300, 465);

        ctx.fillStyle = "#fff"; ctx.font = "bold 26px Arial"; ctx.fillText("Spending Breakdown:", 50, 560);
        let y = 620; Object.entries(cm).sort((a,b)=>b[1]-a[1]).slice(0, 5).forEach(([cat, amt]) => {
            ctx.fillStyle = "rgba(255,255,255,0.6)"; ctx.font = "20px Arial"; ctx.fillText(cat, 70, y);
            ctx.fillStyle = "#fff"; ctx.fillText(amt.toLocaleString() + " KIP", 380, y); y += 55;
        });
        document.getElementById('share-img').src = canvas.toDataURL();
    }

    function downloadImg() { const a = document.createElement('a'); a.download = 'luxe_filtered_report.png'; a.href = document.getElementById('canvas-hidden').toDataURL(); a.click(); }
    function addC() { const n = document.getElementById('n-cat').value.trim(); if(n && !db.cats.includes(n)) { db.cats.push(n); document.getElementById('n-cat').value=""; saveDB(); } }
    function delC(n) { if(confirm(`‡∫•‡∫∂‡∫ö‡ªù‡∫ß‡∫î‡ªù‡∫π‡ªà "${n}"?`)) { db.cats = db.cats.filter(x => x !== n); saveDB(); } }
    function exportData() { const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(db)], {type:'application/json'})); a.download="luxe_money_backup.json"; a.click(); }
    function resetPIN() { if(confirm("Reset PIN?")) { db.pin = null; saveDB(); location.reload(); } }

    if(db.pin) document.getElementById('pin-msg').innerText = "‡ªÉ‡∫™‡ªà PIN ‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡ªÉ‡∫ä‡ªâ";
    updateAllViews();
</script>
</body>
</html>